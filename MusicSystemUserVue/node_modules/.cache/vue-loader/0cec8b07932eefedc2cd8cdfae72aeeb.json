{"remainingRequest":"F:\\外包项目重置\\音乐管理系统\\影院管理系统\\MusicSystem\\MusicSystemUserVue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\外包项目重置\\音乐管理系统\\影院管理系统\\MusicSystem\\MusicSystemUserVue\\src\\components\\Upload.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\外包项目重置\\音乐管理系统\\影院管理系统\\MusicSystem\\MusicSystemUserVue\\src\\components\\Upload.vue","mtime":1678901196000},{"path":"F:\\外包项目重置\\音乐管理系统\\影院管理系统\\MusicSystem\\MusicSystemUserVue\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1696214897000},{"path":"F:\\外包项目重置\\音乐管理系统\\影院管理系统\\MusicSystem\\MusicSystemUserVue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1696214897000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQge21hcEdldHRlcnN9IGZyb20gJ3Z1ZXgnDQppbXBvcnQge21peGlufSBmcm9tICcuLi9taXhpbnMnDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgICBuYW1lOiAndXBsb2FkJywNCiAgICBtaXhpbnM6IFttaXhpbl0sDQogICAgY29tcHV0ZWQ6ew0KICAgICAgICAuLi5tYXBHZXR0ZXJzKFsNCiAgICAgICAgICAgICd1c2VySWQnDQogICAgICAgIF0pDQogICAgfSwNCiAgICBtZXRob2RzOnsNCiAgICAgICAgLy/kuIrkvKDlnLDlnYANCiAgICAgICAgdXBsb2FkVXJsKCl7DQogICAgICAgICAgICByZXR1cm4gYCR7dGhpcy4kc3RvcmUuc3RhdGUuY29uZmlndXJlLkhPU1R9L2NvbnN1bWVyL3VwZGF0ZUNvbnN1bWVyUGljP2lkPSR7dGhpcy51c2VySWR9YA0KICAgICAgICB9LA0KICAgICAgICAgLy/kuIrkvKDmiJDlip8NCiAgICAgICAgaGFuZGxlQXZhdG9yU3VjY2VzcyhyZXMsZmlsZSl7ICAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICBpZihyZXMuY29kZSA9PSAxKXsNCiAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldEF2YXRvcicscmVzLmF2YXRvcik7DQogICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoJ+S/ruaUueaIkOWKnycsJ3N1Y2Nlc3MnKTsNCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KCfkv67mlLnlpLHotKUnLCdlcnJvcicpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAvL+S4iuS8oOS5i+WJjeeahOagoemqjA0KICAgICAgICBiZWZvcmVBdmF0b3JVcGxvYWQoZmlsZSl7DQogICAgICAgICAgICBjb25zdCBpc0pQRyA9IGZpbGUudHlwZT09J2ltYWdlL2pwZWcnOw0KICAgICAgICAgICAgY29uc3QgaXNMdDEwTSA9IGZpbGUuc2l6ZSAvMTAyNC8xMDI0PDEwOw0KICAgICAgICAgICAgaWYoIWlzSlBHKXsNCiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeSgn5LiK5Lyg5aS05YOP5Zu+54mH5Y+q6IO95pivSlBH5qC85byPJywnZXJyb3InKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZighaXNMdDEwTSl7DQogICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoJ+S4iuS8oOWktOWDj+WbvueJh+S4jeiDveWkp+S6jjEwTUInLCdlcnJvcicpOw0KICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgfQ0KfQ0K"},{"version":3,"sources":["Upload.vue"],"names":[],"mappings":";AAiBA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Upload.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"upload\">\r\n        <p class=\"title\">修改头像</p>\r\n        <hr/>\r\n        <div class=\"section\">\r\n            <el-upload drag :action=\"uploadUrl()\" :show-file-list=\"false\" :on-success=\"handleAvatorSuccess\"\r\n                :before-upload=\"beforeAvatorUpload\">\r\n                <i class=\"el-icon-upload\"></i>\r\n                <div>\r\n                    将文件拖到此处，或<span style=\"color:blue\">修改头像</span>\r\n                </div>\r\n                <div slot=\"tip\">只能上传jpg/png文件，且不能超过10MB</div>\r\n            </el-upload>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport {mapGetters} from 'vuex'\r\nimport {mixin} from '../mixins'\r\n\r\nexport default {\r\n    name: 'upload',\r\n    mixins: [mixin],\r\n    computed:{\r\n        ...mapGetters([\r\n            'userId'\r\n        ])\r\n    },\r\n    methods:{\r\n        //上传地址\r\n        uploadUrl(){\r\n            return `${this.$store.state.configure.HOST}/consumer/updateConsumerPic?id=${this.userId}`\r\n        },\r\n         //上传成功\r\n        handleAvatorSuccess(res,file){                     \r\n            if(res.code == 1){\r\n                this.$store.commit('setAvator',res.avator);\r\n                this.notify('修改成功','success');\r\n            }else{\r\n                this.notify('修改失败','error');\r\n            }\r\n        },\r\n        //上传之前的校验\r\n        beforeAvatorUpload(file){\r\n            const isJPG = file.type=='image/jpeg';\r\n            const isLt10M = file.size /1024/1024<10;\r\n            if(!isJPG){\r\n                this.notify('上传头像图片只能是JPG格式','error');\r\n                return false;\r\n            }\r\n            if(!isLt10M){\r\n                this.notify('上传头像图片不能大于10MB','error');\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import '../assets/css/upload.scss';\r\n</style>"]}]}