{"remainingRequest":"D:\\keshe\\音乐管理系统\\MusicSystem\\MusicSystemUserVue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\keshe\\音乐管理系统\\MusicSystem\\MusicSystemUserVue\\src\\components\\Info.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\keshe\\音乐管理系统\\MusicSystem\\MusicSystemUserVue\\src\\components\\Info.vue","mtime":1678901196000},{"path":"D:\\keshe\\音乐管理系统\\MusicSystem\\MusicSystemUserVue\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1696214897000},{"path":"D:\\keshe\\音乐管理系统\\MusicSystem\\MusicSystemUserVue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1696214897000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQge21hcEdldHRlcnN9IGZyb20gJ3Z1ZXgnDQppbXBvcnQge3J1bGVzLGNpdGllc30gZnJvbSAnLi4vYXNzZXRzL2RhdGEvZm9ybScNCmltcG9ydCB7bWl4aW59IGZyb20gJy4uL21peGlucycNCmltcG9ydCB7Z2V0VXNlck9mSWQsdXBkYXRlVXNlck1zZ30gZnJvbSAnLi4vYXBpL2luZGV4Jw0KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZTogJ2luZm8nLA0KICAgIG1peGluczogW21peGluXSwNCiAgICBkYXRhKCkgew0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgcmVnaXN0ZXJGb3JtOiB7DQogICAgICAgICAgICAgICAgdXNlcm5hbWU6ICcnLCAgICAgICAvL+eUqOaIt+WQjQ0KICAgICAgICAgICAgICAgIHBhc3N3b3JkOiAnJywgICAgICAgLy/lr4bnoIENCiAgICAgICAgICAgICAgICBzZXg6ICcnLCAgICAgICAgICAgIC8v5oCn5YirDQogICAgICAgICAgICAgICAgcGhvbmVOdW06ICcnLCAgICAgICAvL+aJi+acug0KICAgICAgICAgICAgICAgIGVtYWlsOiAnJywgICAgICAgICAgLy/pgq7nrrENCiAgICAgICAgICAgICAgICBiaXJ0aDogJycsICAgICAgICAgIC8v55Sf5pelDQogICAgICAgICAgICAgICAgaW50cm9kdWN0aW9uOiAnJywgICAvL+etvuWQjQ0KICAgICAgICAgICAgICAgIGxvY2F0aW9uOiAnJyAgICAgICAvL+WcsOWMug0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGNpdGllczogW10sICAgICAgICAgICAgLy/miYDmnInnmoTlnLDljLotLeecgQ0KICAgICAgICAgICAgcnVsZXM6IHt9ICAgICAgICAgICAgICAgLy/ooajljZXmj5DkuqTnmoTop4TliJkNCiAgICAgICAgfSAgICAgICAgDQogICAgfSwNCiAgICBjb21wdXRlZDp7DQogICAgICAgIC4uLm1hcEdldHRlcnMoWw0KICAgICAgICAgICAgJ3VzZXJJZCcNCiAgICAgICAgXSkNCiAgICB9LA0KICAgIGNyZWF0ZWQoKSB7DQogICAgICAgIHRoaXMucnVsZXMgPSBydWxlczsNCiAgICAgICAgdGhpcy5jaXRpZXMgPSBjaXRpZXM7DQogICAgfSwNCiAgICBtb3VudGVkKCl7DQogICAgICAgIHRoaXMuZ2V0TXNnKHRoaXMudXNlcklkKTsNCiAgICB9LA0KICAgIG1ldGhvZHM6ew0KICAgICAgICBnZXRNc2codXNlcklkKXsNCiAgICAgICAgICAgIGdldFVzZXJPZklkKHVzZXJJZCkNCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT57DQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJGb3JtLnVzZXJuYW1lID0gcmVzLnVzZXJuYW1lOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRm9ybS5wYXNzd29yZCA9IHJlcy5wYXNzd29yZDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlckZvcm0uc2V4ID0gcmVzLnNleDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlckZvcm0ucGhvbmVOdW0gPSByZXMucGhvbmVOdW07DQogICAgICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJGb3JtLmVtYWlsID0gcmVzLmVtYWlsOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRm9ybS5iaXJ0aCA9IHJlcy5iaXJ0aDsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlckZvcm0uaW50cm9kdWN0aW9uID0gcmVzLmludHJvZHVjdGlvbjsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlckZvcm0ubG9jYXRpb24gPSByZXMubG9jYXRpb247DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgc2F2ZU1zZygpew0KICAgICAgICAgICAgbGV0IF90aGlzID0gdGhpczsNCiAgICAgICAgICAgIGxldCBkID0gbmV3IERhdGUodGhpcy5yZWdpc3RlckZvcm0uYmlydGgpOw0KICAgICAgICAgICAgbGV0IGRhdGV0aW1lID0gZC5nZXRGdWxsWWVhcigpICsgJy0nICsoZC5nZXRNb250aCgpICsgMSkgKyctJyArIGQuZ2V0RGF0ZSgpOw0KICAgICAgICAgICAgbGV0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsNCiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoJ2lkJyx0aGlzLnVzZXJJZCk7DQogICAgICAgICAgICBwYXJhbXMuYXBwZW5kKCd1c2VybmFtZScsdGhpcy5yZWdpc3RlckZvcm0udXNlcm5hbWUpOw0KICAgICAgICAgICAgcGFyYW1zLmFwcGVuZCgncGFzc3dvcmQnLHRoaXMucmVnaXN0ZXJGb3JtLnBhc3N3b3JkKTsNCiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoJ3NleCcsdGhpcy5yZWdpc3RlckZvcm0uc2V4KTsNCiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoJ3Bob25lTnVtJyx0aGlzLnJlZ2lzdGVyRm9ybS5waG9uZU51bSk7DQogICAgICAgICAgICBwYXJhbXMuYXBwZW5kKCdlbWFpbCcsdGhpcy5yZWdpc3RlckZvcm0uZW1haWwpOw0KICAgICAgICAgICAgcGFyYW1zLmFwcGVuZCgnYmlydGgnLGRhdGV0aW1lKTsNCiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoJ2ludHJvZHVjdGlvbicsdGhpcy5yZWdpc3RlckZvcm0uaW50cm9kdWN0aW9uKTsNCiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoJ2xvY2F0aW9uJyx0aGlzLnJlZ2lzdGVyRm9ybS5sb2NhdGlvbik7DQogICAgICAgICAgICB1cGRhdGVVc2VyTXNnKHBhcmFtcykNCiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZihyZXMuY29kZSA9PSAxKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLiRzdG9yZS5jb21taXQoJ3NldFVzZXJuYW1lJyx0aGlzLnJlZ2lzdGVyRm9ybS51c2VybmFtZSk7DQogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5ub3RpZnkoJ+S/ruaUueaIkOWKnycsJ3N1Y2Nlc3MnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6ICcvJ30pOw0KICAgICAgICAgICAgICAgICAgICAgICAgfSwyMDAwKTsNCiAgICAgICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5ub3RpZnkoJ+S/ruaUueWksei0pScsJ2Vycm9yJyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gew0KICAgICAgICAgICAgICAgICAgICBfdGhpcy5ub3RpZnkoJ+S/ruaUueWksei0pScsJ2Vycm9yJyk7DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgZ29iYWNrKGluZGV4KXsNCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbyhpbmRleCk7DQogICAgICAgIH0NCiAgICB9DQp9DQo="},{"version":3,"sources":["Info.vue"],"names":[],"mappings":";AAiDA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Info.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n<div>\r\n    <div class=\"info\">\r\n        <div class=\"title\">\r\n            <span>编辑个人资料</span>\r\n        </div>\r\n        <hr/>\r\n        <div class=\"personal\">\r\n            <el-form :model=\"registerForm\" ref=\"registerForm\" label-width=\"70px\" class=\"demo-ruleForm\" :rules=\"rules\">\r\n                <el-form-item prop=\"username\" label=\"用户名\">\r\n                    <el-input v-model=\"registerForm.username\" placeholder=\"用户名\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item prop=\"password\" label=\"密码\">\r\n                    <el-input type=\"password\" v-model=\"registerForm.password\" placeholder=\"密码\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item prop=\"sex\" label=\"性别\">\r\n                    <el-radio-group v-model=\"registerForm.sex\">\r\n                        <el-radio :label=\"0\">女</el-radio>\r\n                        <el-radio :label=\"1\">男</el-radio>\r\n                    </el-radio-group>\r\n                </el-form-item>\r\n                <el-form-item prop=\"phoneNum\" label=\"手机\">\r\n                    <el-input v-model=\"registerForm.phoneNum\" placeholder=\"手机\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item prop=\"email\" label=\"邮箱\">\r\n                    <el-input v-model=\"registerForm.email\" placeholder=\"邮箱\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item prop=\"birth\" label=\"生日\">\r\n                    <el-date-picker type='date' :editable=\"false\" v-model=\"registerForm.birth\" placeholder=\"选择日期\" style=\"width: 100%;\"></el-date-picker>\r\n                </el-form-item>\r\n                <el-form-item prop=\"introduction\" label=\"签名\">\r\n                    <el-input v-model=\"registerForm.introduction\" placeholder=\"签名\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item prop=\"location\" label=\"地区\">\r\n                    <el-select v-model=\"registerForm.location\" placeholder=\"地区\" style=\"width: 100%;\">\r\n                        <el-option v-for=\" item in cities\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\"></el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n            </el-form>\r\n            <div class=\"btn\">\r\n                <div @click=\"saveMsg\">保存</div>\r\n                <div @click=\"goback(-1)\">取消</div>\r\n            </div>\r\n        </div>\r\n        \r\n    </div>\r\n</div>\r\n</template>\r\n<script>\r\nimport {mapGetters} from 'vuex'\r\nimport {rules,cities} from '../assets/data/form'\r\nimport {mixin} from '../mixins'\r\nimport {getUserOfId,updateUserMsg} from '../api/index'\r\n\r\nexport default {\r\n    name: 'info',\r\n    mixins: [mixin],\r\n    data() {\r\n        return {\r\n            registerForm: {\r\n                username: '',       //用户名\r\n                password: '',       //密码\r\n                sex: '',            //性别\r\n                phoneNum: '',       //手机\r\n                email: '',          //邮箱\r\n                birth: '',          //生日\r\n                introduction: '',   //签名\r\n                location: ''       //地区\r\n            },\r\n            cities: [],            //所有的地区--省\r\n            rules: {}               //表单提交的规则\r\n        }        \r\n    },\r\n    computed:{\r\n        ...mapGetters([\r\n            'userId'\r\n        ])\r\n    },\r\n    created() {\r\n        this.rules = rules;\r\n        this.cities = cities;\r\n    },\r\n    mounted(){\r\n        this.getMsg(this.userId);\r\n    },\r\n    methods:{\r\n        getMsg(userId){\r\n            getUserOfId(userId)\r\n                .then(res =>{\r\n                    this.registerForm.username = res.username;\r\n                    this.registerForm.password = res.password;\r\n                    this.registerForm.sex = res.sex;\r\n                    this.registerForm.phoneNum = res.phoneNum;\r\n                    this.registerForm.email = res.email;\r\n                    this.registerForm.birth = res.birth;\r\n                    this.registerForm.introduction = res.introduction;\r\n                    this.registerForm.location = res.location;\r\n                                \r\n                })\r\n                .catch(err => {\r\n                    console.log(err);\r\n                })\r\n        },\r\n        saveMsg(){\r\n            let _this = this;\r\n            let d = new Date(this.registerForm.birth);\r\n            let datetime = d.getFullYear() + '-' +(d.getMonth() + 1) +'-' + d.getDate();\r\n            let params = new URLSearchParams();\r\n            params.append('id',this.userId);\r\n            params.append('username',this.registerForm.username);\r\n            params.append('password',this.registerForm.password);\r\n            params.append('sex',this.registerForm.sex);\r\n            params.append('phoneNum',this.registerForm.phoneNum);\r\n            params.append('email',this.registerForm.email);\r\n            params.append('birth',datetime);\r\n            params.append('introduction',this.registerForm.introduction);\r\n            params.append('location',this.registerForm.location);\r\n            updateUserMsg(params)\r\n                .then(res => {\r\n                    if(res.code == 1){\r\n                        _this.$store.commit('setUsername',this.registerForm.username);\r\n                        _this.notify('修改成功','success');\r\n                        setTimeout(function(){\r\n                            _this.$router.push({path: '/'});\r\n                        },2000);\r\n                    }else{\r\n                        _this.notify('修改失败','error');\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    _this.notify('修改失败','error');\r\n                })\r\n        },\r\n        goback(index){\r\n            this.$router.go(index);\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../assets/css/info.scss';\r\n</style>"]}]}