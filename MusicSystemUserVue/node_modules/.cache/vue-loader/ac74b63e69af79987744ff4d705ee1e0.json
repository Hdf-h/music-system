{"remainingRequest":"D:\\keshe\\音乐管理系统\\MusicSystem\\MusicSystemUserVue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\keshe\\音乐管理系统\\MusicSystem\\MusicSystemUserVue\\src\\components\\TheAside.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\keshe\\音乐管理系统\\MusicSystem\\MusicSystemUserVue\\src\\components\\TheAside.vue","mtime":1678901196000},{"path":"D:\\keshe\\音乐管理系统\\MusicSystem\\MusicSystemUserVue\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1696214897000},{"path":"D:\\keshe\\音乐管理系统\\MusicSystem\\MusicSystemUserVue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1696214897000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQge21hcEdldHRlcnN9IGZyb20gJ3Z1ZXgnOw0KaW1wb3J0IHsgZ2V0Q29sbGVjdE9mVXNlcklkIH0gZnJvbSAnLi4vYXBpL2luZGV4JzsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG5hbWU6ICd0aGUtYXNpZGUnLA0KICAgIGNvbXB1dGVkOiB7DQogICAgICAgIC4uLm1hcEdldHRlcnMoWw0KICAgICAgICAgICAgJ3Nob3dBc2lkZScsICAgICAgICAgLy/mmK/lkKbmmL7npLrmkq3mlL7kuK3nmoTmrYzmm7LliJfooagNCiAgICAgICAgICAgICdsaXN0T2ZTb25ncycsICAgICAgIC8v5b2T5YmN5q2M5puy5YiX6KGoDQogICAgICAgICAgICAnaWQnLCAgICAgICAgICAgICAgICAvL+aSreaUvuS4reeahOmfs+S5kGlkDQogICAgICAgICAgICAnbG9naW5JbicsICAgICAgICAgICAgICAvL+eUqOaIt+aYr+WQpuW3sueZu+W9lQ0KICAgICAgICAgICAgJ3VzZXJJZCcsICAgICAgICAgICAgICAgLy/lvZPliY3nmbvlvZXnlKjmiLfnmoRpZA0KICAgICAgICAgICAgJ2lzQWN0aXZlJywgICAgICAgICAgICAgLy/lvZPliY3mkq3mlL7nmoTmrYzmm7LmmK/lkKblt7LmlLbol48NCiAgICAgICAgXSkNCiAgICB9LA0KICAgIG1vdW50ZWQoKXsNCiAgICAgICAgbGV0IF90aGlzID0gdGhpczsNCiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uKCl7DQogICAgICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRTaG93QXNpZGUnLGZhbHNlKQ0KICAgICAgICB9LHRydWUpOw0KICAgIH0sDQogICAgbWV0aG9kczp7DQogICAgICAgIC8v6I635Y+W5ZCN5a2X5YmN5Y2K6YOo5YiGLS3mrYzmiYvlkI0NCiAgICAgICAgcmVwbGFjZUxOYW1lKHN0cil7DQogICAgICAgICAgICBsZXQgYXJyID0gc3RyLnNwbGl0KCctJyk7DQogICAgICAgICAgICByZXR1cm4gYXJyWzBdOw0KICAgICAgICB9LA0KICAgICAgICAvL+iOt+WPluWQjeWtl+WQjuWNiumDqOWIhi0t5q2M5ZCNDQogICAgICAgIHJlcGxhY2VGTmFtZShzdHIpew0KICAgICAgICAgICAgbGV0IGFyciA9IHN0ci5zcGxpdCgnLScpOw0KICAgICAgICAgICAgcmV0dXJuIGFyclsxXTsNCiAgICAgICAgfSwNCiAgICAgICAgLy/mkq3mlL4NCiAgICAgICAgdG9wbGF5OiBmdW5jdGlvbihpZCx1cmwscGljLGluZGV4LG5hbWUsbHlyaWMpew0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRJZCcsaWQpOw0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRVcmwnLHRoaXMuJHN0b3JlLnN0YXRlLmNvbmZpZ3VyZS5IT1NUK3VybCk7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldFBpY1VybCcsdGhpcy4kc3RvcmUuc3RhdGUuY29uZmlndXJlLkhPU1QrcGljKTsNCiAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0TGlzdEluZGV4JyxpbmRleCk7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldFRpdGxlJyx0aGlzLnJlcGxhY2VGTmFtZShuYW1lKSk7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldEFydGlzdCcsdGhpcy5yZXBsYWNlTE5hbWUobmFtZSkpOw0KICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRMeXJpYycsdGhpcy5wYXJzZUx5cmljKGx5cmljKSk7DQogICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldElzQWN0aXZlJyxmYWxzZSk7DQogICAgICAgICAgICBpZih0aGlzLmxvZ2luSW4pew0KICAgICAgICAgICAgICAgIGdldENvbGxlY3RPZlVzZXJJZCh0aGlzLnVzZXJJZCkNCiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+ew0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpdGVtIG9mIHJlcyl7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXRlbS5zb25nSWQgPT0gaWQpew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3NldElzQWN0aXZlJyx0cnVlKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAvL+ino+aekOatjOivjQ0KICAgICAgICBwYXJzZUx5cmljKHRleHQpew0KICAgICAgICAgICAgbGV0IGxpbmVzID0gdGV4dC5zcGxpdCgiXG4iKTsgICAgICAgICAgICAgICAgICAgLy/lsIbmrYzor43mjInooYzliIbop6PmiJDmlbDnu4QNCiAgICAgICAgICAgIGxldCBwYXR0ZXJuID0gL1xbXGR7Mn06XGR7Mn0uKFxkezN9fFxkezJ9KVxdL2c7IC8v5pe26Ze05qC85byP55qE5q2j5YiZ6KGo6L6+5byPDQogICAgICAgICAgICBsZXQgcmVzdWx0ID0gW107ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+i/lOWbnuWAvA0KICAgICAgICAgICAgLy/lr7nkuo7mrYzor43moLzlvI/kuI3lr7nnmoTnm7TmjqXov5Tlm54NCiAgICAgICAgICAgIGlmKCEoL1xbLitcXS8udGVzdCh0ZXh0KSkpew0KICAgICAgICAgICAgICAgIHJldHVybiBbWzAsdGV4dF1dDQogICAgICAgICAgICB9ICAgICAgICANCiAgICAgICAgICAgIC8v5Y675o6J5YmN6Z2i5qC85byP5LiN5q2j56Gu55qE6KGMDQogICAgICAgICAgICB3aGlsZSghcGF0dGVybi50ZXN0KGxpbmVzWzBdKSl7DQogICAgICAgICAgICAgICAgbGluZXMgPSBsaW5lcy5zbGljZSgxKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8v6YGN5Y6G5q+P5LiA6KGM77yM5b2i5oiQ5LiA5Liq5q+P6KGM5bim552A5L+p5YWD57Sg55qE5pWw57uE77yM56ys5LiA5Liq5YWD57Sg5piv5Lul56eS5Li66K6h566X5Y2V5L2N55qE5pe26Ze077yM56ys5LqM5Liq5YWD57Sg5piv5q2M6K+NDQogICAgICAgICAgICBmb3IobGV0IGl0ZW0gb2YgbGluZXMpew0KICAgICAgICAgICAgICAgIGxldCB0aW1lID0gaXRlbS5tYXRjaChwYXR0ZXJuKTsgIC8v5a2Y5YmN6Z2i55qE5pe26Ze05q61DQogICAgICAgICAgICAgICAgbGV0IHZhbHVlID0gaXRlbS5yZXBsYWNlKHBhdHRlcm4sJycpOy8v5a2Y5ZCO6Z2i55qE5q2M6K+NDQogICAgICAgICAgICAgICAgZm9yKGxldCBpdGVtMSBvZiB0aW1lKXsNCiAgICAgICAgICAgICAgICAgICAgbGV0IHQgPSBpdGVtMS5zbGljZSgxLC0xKS5zcGxpdCgiOiIpOyAgIC8v5Y+W5Ye65pe26Ze077yM5o2i566X5oiQ5pWw57uEDQogICAgICAgICAgICAgICAgICAgIGlmKHZhbHVlIT0nJyl7DQogICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChbcGFyc2VJbnQodFswXSwxMCkqNjAgKyBwYXJzZUZsb2F0KHRbMV0pLHZhbHVlXSk7DQogICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIH0gICAgICAgICAgICAgICAgDQogICAgICAgICAgICB9DQogICAgICAgICAgICAvL+aMieeFp+esrOS4gOS4quWFg+e0oC0t5pe26Ze0LS3mjpLluo8NCiAgICAgICAgICAgIHJlc3VsdC5zb3J0KGZ1bmN0aW9uKGEsYil7DQogICAgICAgICAgICAgICAgcmV0dXJuIGFbMF0gLSBiWzBdOw0KICAgICAgICAgICAgfSk7DQogICAgICAgICAgICByZXR1cm4gcmVzdWx0Ow0KICAgICAgICB9LA0KICAgIH0NCn0NCg=="},{"version":3,"sources":["TheAside.vue"],"names":[],"mappings":";AAcA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TheAside.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <transition name=\"slide-fade\">\r\n        <div class=\"the-aside\" v-if=\"showAside\">\r\n            <h2 class=\"title\">播放列表</h2>\r\n            <ul class=\"menus\">\r\n                <li v-for=\"(item,index) in listOfSongs\" :key=\"index\" :class=\"{'is-play': id==item.id}\"\r\n                @click=\"toplay(item.id,item.url,item.pic,item.index,item.name,item.lyric)\">\r\n                    {{replaceFName(item.name)}}\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </transition>\r\n</template>\r\n<script>\r\nimport {mapGetters} from 'vuex';\r\nimport { getCollectOfUserId } from '../api/index';\r\n\r\nexport default {\r\n    name: 'the-aside',\r\n    computed: {\r\n        ...mapGetters([\r\n            'showAside',         //是否显示播放中的歌曲列表\r\n            'listOfSongs',       //当前歌曲列表\r\n            'id',                //播放中的音乐id\r\n            'loginIn',              //用户是否已登录\r\n            'userId',               //当前登录用户的id\r\n            'isActive',             //当前播放的歌曲是否已收藏\r\n        ])\r\n    },\r\n    mounted(){\r\n        let _this = this;\r\n        document.addEventListener('click',function(){\r\n            _this.$store.commit('setShowAside',false)\r\n        },true);\r\n    },\r\n    methods:{\r\n        //获取名字前半部分--歌手名\r\n        replaceLName(str){\r\n            let arr = str.split('-');\r\n            return arr[0];\r\n        },\r\n        //获取名字后半部分--歌名\r\n        replaceFName(str){\r\n            let arr = str.split('-');\r\n            return arr[1];\r\n        },\r\n        //播放\r\n        toplay: function(id,url,pic,index,name,lyric){\r\n            this.$store.commit('setId',id);\r\n            this.$store.commit('setUrl',this.$store.state.configure.HOST+url);\r\n            this.$store.commit('setPicUrl',this.$store.state.configure.HOST+pic);\r\n            this.$store.commit('setListIndex',index);\r\n            this.$store.commit('setTitle',this.replaceFName(name));\r\n            this.$store.commit('setArtist',this.replaceLName(name));\r\n            this.$store.commit('setLyric',this.parseLyric(lyric));\r\n            this.$store.commit('setIsActive',false);\r\n            if(this.loginIn){\r\n                getCollectOfUserId(this.userId)\r\n                    .then(res =>{\r\n                        for(let item of res){\r\n                            if(item.songId == id){\r\n                                this.$store.commit('setIsActive',true);\r\n                                break;\r\n                            }\r\n                        }\r\n                    })\r\n            }\r\n        },\r\n        //解析歌词\r\n        parseLyric(text){\r\n            let lines = text.split(\"\\n\");                   //将歌词按行分解成数组\r\n            let pattern = /\\[\\d{2}:\\d{2}.(\\d{3}|\\d{2})\\]/g; //时间格式的正则表达式\r\n            let result = [];                                //返回值\r\n            //对于歌词格式不对的直接返回\r\n            if(!(/\\[.+\\]/.test(text))){\r\n                return [[0,text]]\r\n            }        \r\n            //去掉前面格式不正确的行\r\n            while(!pattern.test(lines[0])){\r\n                lines = lines.slice(1);\r\n            }\r\n            //遍历每一行，形成一个每行带着俩元素的数组，第一个元素是以秒为计算单位的时间，第二个元素是歌词\r\n            for(let item of lines){\r\n                let time = item.match(pattern);  //存前面的时间段\r\n                let value = item.replace(pattern,'');//存后面的歌词\r\n                for(let item1 of time){\r\n                    let t = item1.slice(1,-1).split(\":\");   //取出时间，换算成数组\r\n                    if(value!=''){\r\n                        result.push([parseInt(t[0],10)*60 + parseFloat(t[1]),value]);\r\n                    }                    \r\n                }                \r\n            }\r\n            //按照第一个元素--时间--排序\r\n            result.sort(function(a,b){\r\n                return a[0] - b[0];\r\n            });\r\n            return result;\r\n        },\r\n    }\r\n}\r\n</script>\r\n<style  lang=\"scss\" scoped>\r\n@import '../assets/css/the-aside.scss';\r\n</style>\r\n"]}]}