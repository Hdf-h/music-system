{"remainingRequest":"F:\\外包项目重置\\音乐管理系统\\影院管理系统\\MusicSystem\\MusicSystemAdminVue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\外包项目重置\\音乐管理系统\\影院管理系统\\MusicSystem\\MusicSystemAdminVue\\src\\pages\\CommentPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\外包项目重置\\音乐管理系统\\影院管理系统\\MusicSystem\\MusicSystemAdminVue\\src\\pages\\CommentPage.vue","mtime":1696062598000},{"path":"F:\\外包项目重置\\音乐管理系统\\影院管理系统\\MusicSystem\\MusicSystemAdminVue\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1696221622000},{"path":"F:\\外包项目重置\\音乐管理系统\\影院管理系统\\MusicSystem\\MusicSystemAdminVue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1696221623000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBtaXhpbiB9IGZyb20gJy4uL21peGlucy9pbmRleCc7DQppbXBvcnQge2dldFVzZXJPZklkLGdldENvbW1lbnRPZlNvbmdMaXN0SWQsZGVsZXRlQ29tbWVudH0gZnJvbSAnLi4vYXBpL2luZGV4JzsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG1peGluczogW21peGluXSwNCiAgICBwcm9wczogWydpZCddLA0KICAgIGRhdGEoKXsNCiAgICAgICAgcmV0dXJuew0KICAgICAgICAgICAgZGVsVmlzaWJsZTogZmFsc2UsICAgICAgICAgIC8v5Yig6Zmk5by556qX5piv5ZCm5pi+56S6DQogICAgICAgICAgICB0YWJsZURhdGE6IFtdLA0KICAgICAgICAgICAgdGVtcERhdGE6IFtdLA0KICAgICAgICAgICAgc2VsZWN0X3dvcmQ6ICcnLA0KICAgICAgICAgICAgaWR4OiAtMSwgICAgICAgICAgLy/lvZPliY3pgInmi6npobkNCiAgICAgICAgICAgIG11bHRpcGxlU2VsZWN0aW9uOiBbXSwgICAvL+WTquS6m+mhueW3sue7j+aJk+WLvg0KICAgICAgICB9DQogICAgfSwNCiAgICB3YXRjaDp7DQogICAgICAgIC8v5pCc57Si5qGG6YeM6Z2i55qE5YaF5a655Y+R55Sf5Y+Y5YyW55qE5pe25YCZ77yM5pCc57Si57uT5p6cdGFibGXliJfooajnmoTlhoXlrrnot5/nnYDlroPnmoTlhoXlrrnlj5HnlJ/lj5jljJYNCiAgICAgICAgc2VsZWN0X3dvcmQ6IGZ1bmN0aW9uKCl7DQogICAgICAgICAgICBpZih0aGlzLnNlbGVjdF93b3JkID09ICcnKXsNCiAgICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHRoaXMudGVtcERhdGE7DQogICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IFtdOw0KICAgICAgICAgICAgICAgIGZvcihsZXQgaXRlbSBvZiB0aGlzLnRlbXBEYXRhKXsNCiAgICAgICAgICAgICAgICAgICAgaWYoaXRlbS5uYW1lLmluY2x1ZGVzKHRoaXMuc2VsZWN0X3dvcmQpKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFibGVEYXRhLnB1c2goaXRlbSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9LA0KICAgIGNyZWF0ZWQoKXsNCiAgICAgICAgdGhpcy5nZXREYXRhKCk7DQogICAgfSwNCiAgICBtZXRob2RzOnsNCiAgICAgICAgLy/mn6Xor6LmjIflrprmrYzljZXnmoTor4TorrrliJfooagNCiAgICAgICAgZ2V0RGF0YSgpew0KICAgICAgICAgICAgdGhpcy50ZW1wRGF0YSA9IFtdOw0KICAgICAgICAgICAgdGhpcy50YWJsZURhdGEgPSBbXTsNCiAgICAgICAgICAgIGdldENvbW1lbnRPZlNvbmdMaXN0SWQodGhpcy4kcm91dGUucXVlcnkuaWQpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICBmb3IobGV0IGl0ZW0gb2YgcmVzKXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRVc2VycyhpdGVtLnVzZXJJZCxpdGVtKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICAvL+iOt+WPlueUqOaIt+WQje+8jOi/nuWQjOacrOWvueixoeaUvuWIsHRlbXBEYXRh5ZKMdGFibGVEYXRh6YeM6Z2iDQogICAgICAgIGdldFVzZXJzKGlkLGl0ZW0pew0KICAgICAgICAgICAgZ2V0VXNlck9mSWQoaWQpDQogICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgIGxldCBvID0gaXRlbTsNCiAgICAgICAgICAgICAgICBvLm5hbWUgPSByZXMudXNlcm5hbWU7DQogICAgICAgICAgICAgICAgdGhpcy50ZW1wRGF0YS5wdXNoKG8pOw0KICAgICAgICAgICAgICAgIHRoaXMudGFibGVEYXRhLnB1c2gobyk7DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9LA0KICAgICAgICAvL+WIoOmZpOS4gOadoeivhOiuug0KICAgICAgICBkZWxldGVSb3coKXsNCiAgICAgICAgICAgIGRlbGV0ZUNvbW1lbnQodGhpcy5pZHguaWQpDQogICAgICAgICAgICAudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgIGlmKHJlcyl7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeSgi5Yig6Zmk5oiQ5YqfIiwic3VjY2VzcyIpOw0KICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeSgi5Yig6Zmk5aSx6LSlIiwiZXJyb3IiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgdGhpcy5kZWxWaXNpYmxlID0gZmFsc2U7DQogICAgICAgIH0sDQogICAgICAgIC8v5om56YeP5Yig6Zmk5bey57uP6YCJ5oup55qE6aG5DQogICAgICAgIGRlbEFsbCgpew0KICAgICAgICAgICAgZm9yKGxldCBpdGVtIG9mIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24pew0KICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRGVsZXRlKGl0ZW0pOw0KICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlUm93KCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLm11bHRpcGxlU2VsZWN0aW9uID0gW107DQogICAgICAgIH0NCiAgICB9ICAgDQp9DQo="},{"version":3,"sources":["CommentPage.vue"],"names":[],"mappings":";AAkCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CommentPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n    <div class=\"table\">\r\n        <div class=\"crumbs\" style=\"padding: 20px 0 5px 20px;\">\r\n            <i class=\"iconfont icon-r-list\" style=\"font-size: 24px;\"> 评论信息</i>\r\n        </div>\r\n        <div class=\"container\">\r\n            <div class=\"handle-box\">\r\n                <el-input v-model=\"select_word\" placeholder=\"筛选关键词\" class=\"handle-input\"></el-input>\r\n                <br><br>\r\n                <el-button type=\"danger\" style=\"font-size: 18px;\" @click=\"delAll\"><i class=\"iconfont icon-r-delete\" style=\"font-size: 22px\"></i> 批量删除</el-button>\r\n            </div>\r\n        </div>\r\n        <el-table ref=\"multipleTable\" border style=\"width:100%\" height=\"680px\" :data=\"tableData\" @selection-change=\"handleSelectionChange\">\r\n            <el-table-column type=\"selection\" width=\"40\"></el-table-column>            \r\n            <el-table-column prop=\"name\" label=\"用户名\" align=\"center\"></el-table-column>   \r\n            <el-table-column prop=\"content\" label=\"评论内容\" align=\"center\"></el-table-column>           \r\n            <el-table-column label=\"操作\" width=\"150\" align=\"center\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button style=\"font-size: 18px;\" type=\"danger\" @click=\"handleDelete(scope.row)\"><i class=\"iconfont icon-r-delete\" style=\"font-size: 22px\"></i> 删除</el-button> \r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        \r\n        <el-dialog title=\"删除评论\" :visible.sync=\"delVisible\" width=\"300px\" center>\r\n            <div align=\"center\">删除不可恢复，是否确定删除？</div>\r\n            <span slot=\"footer\">\r\n                <el-button size=\"mini\" @click=\"delVisible = false\">取消</el-button>\r\n                <el-button size=\"mini\" @click=\"deleteRow\">确定</el-button>                \r\n            </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mixin } from '../mixins/index';\r\nimport {getUserOfId,getCommentOfSongListId,deleteComment} from '../api/index';\r\n\r\nexport default {\r\n    mixins: [mixin],\r\n    props: ['id'],\r\n    data(){\r\n        return{\r\n            delVisible: false,          //删除弹窗是否显示\r\n            tableData: [],\r\n            tempData: [],\r\n            select_word: '',\r\n            idx: -1,          //当前选择项\r\n            multipleSelection: [],   //哪些项已经打勾\r\n        }\r\n    },\r\n    watch:{\r\n        //搜索框里面的内容发生变化的时候，搜索结果table列表的内容跟着它的内容发生变化\r\n        select_word: function(){\r\n            if(this.select_word == ''){\r\n                this.tableData = this.tempData;\r\n            }else{\r\n                this.tableData = [];\r\n                for(let item of this.tempData){\r\n                    if(item.name.includes(this.select_word)){\r\n                        this.tableData.push(item);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    created(){\r\n        this.getData();\r\n    },\r\n    methods:{\r\n        //查询指定歌单的评论列表\r\n        getData(){\r\n            this.tempData = [];\r\n            this.tableData = [];\r\n            getCommentOfSongListId(this.$route.query.id).then(res => {\r\n                for(let item of res){\r\n                    this.getUsers(item.userId,item);\r\n                }\r\n            })\r\n        },\r\n        //获取用户名，连同本对象放到tempData和tableData里面\r\n        getUsers(id,item){\r\n            getUserOfId(id)\r\n            .then(res => {\r\n                let o = item;\r\n                o.name = res.username;\r\n                this.tempData.push(o);\r\n                this.tableData.push(o);\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            });\r\n        },\r\n        //删除一条评论\r\n        deleteRow(){\r\n            deleteComment(this.idx.id)\r\n            .then(res => {\r\n                if(res){\r\n                    this.getData();\r\n                    this.notify(\"删除成功\",\"success\");\r\n                }else{\r\n                    this.notify(\"删除失败\",\"error\");\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            });\r\n            this.delVisible = false;\r\n        },\r\n        //批量删除已经选择的项\r\n        delAll(){\r\n            for(let item of this.multipleSelection){\r\n                this.handleDelete(item);\r\n                this.deleteRow();\r\n            }\r\n            this.multipleSelection = [];\r\n        }\r\n    }   \r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .handle-box{\r\n        margin-bottom: 20px;\r\n    }\r\n    .handle-input{\r\n        width: 300px;\r\n        display: inline-block;\r\n    }\r\n</style>"]}]}