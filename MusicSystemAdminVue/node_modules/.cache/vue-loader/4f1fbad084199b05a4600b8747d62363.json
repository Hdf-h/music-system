{"remainingRequest":"D:\\keshe\\音乐管理系统\\MusicSystem\\MusicSystemAdminVue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\keshe\\音乐管理系统\\MusicSystem\\MusicSystemAdminVue\\src\\pages\\CollectPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\keshe\\音乐管理系统\\MusicSystem\\MusicSystemAdminVue\\src\\pages\\CollectPage.vue","mtime":1696062202000},{"path":"D:\\keshe\\音乐管理系统\\MusicSystem\\MusicSystemAdminVue\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1696221622000},{"path":"D:\\keshe\\音乐管理系统\\MusicSystem\\MusicSystemAdminVue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1696221623000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBtaXhpbiB9IGZyb20gIi4uL21peGlucy9pbmRleCI7DQppbXBvcnQgew0KICAgIHNvbmdPZlNvbmdJZCwNCiAgICBnZXRDb2xsZWN0T2ZVc2VySWQsDQogICAgZGVsZXRlQ29sbGVjdGlvbiwNCn0gZnJvbSAiLi4vYXBpL2luZGV4IjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG1peGluczogW21peGluXSwNCiAgICBwcm9wczogWyJpZCJdLA0KICAgIGRhdGEoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBkZWxWaXNpYmxlOiBmYWxzZSwgLy/liKDpmaTlvLnnqpfmmK/lkKbmmL7npLoNCiAgICAgICAgICAgIHRhYmxlRGF0YTogW10sDQogICAgICAgICAgICB0ZW1wRGF0YTogW10sDQogICAgICAgICAgICBzZWxlY3Rfd29yZDogIiIsDQogICAgICAgICAgICBpZHg6IC0xLCAvL+W9k+WJjemAieaLqemhuQ0KICAgICAgICAgICAgbXVsdGlwbGVTZWxlY3Rpb246IFtdLCAvL+WTquS6m+mhueW3sue7j+aJk+WLvg0KICAgICAgICB9Ow0KICAgIH0sDQogICAgd2F0Y2g6IHsNCiAgICAgICAgLy/mkJzntKLmoYbph4zpnaLnmoTlhoXlrrnlj5HnlJ/lj5jljJbnmoTml7blgJnvvIzmkJzntKLnu5Pmnpx0YWJsZeWIl+ihqOeahOWGheWuuei3n+edgOWug+eahOWGheWuueWPkeeUn+WPmOWMlg0KICAgICAgICBzZWxlY3Rfd29yZDogZnVuY3Rpb24gKCkgew0KICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0X3dvcmQgPT0gIiIpIHsNCiAgICAgICAgICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHRoaXMudGVtcERhdGE7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gW107DQogICAgICAgICAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLnRlbXBEYXRhKSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLm5hbWUuaW5jbHVkZXModGhpcy5zZWxlY3Rfd29yZCkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFibGVEYXRhLnB1c2goaXRlbSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0sDQogICAgfSwNCiAgICBjcmVhdGVkKCkgew0KICAgICAgICB0aGlzLmdldERhdGEoKTsNCiAgICB9LA0KICAgIG1ldGhvZHM6IHsNCiAgICAgICAgLy/mn6Xor6Lor6XnlKjmiLfmiYDmnInmlLbol4/nmoTmrYzmm7INCiAgICAgICAgZ2V0RGF0YSgpIHsNCiAgICAgICAgICAgIHRoaXMudGVtcERhdGEgPSBbXTsNCiAgICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gW107DQogICAgICAgICAgICBnZXRDb2xsZWN0T2ZVc2VySWQodGhpcy4kcm91dGUucXVlcnkuaWQpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgcmVzKSB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0U29uZyhpdGVtLnNvbmdJZCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0sDQogICAgICAgIC8v5qC55o2u5q2M5puyaWTmn6Xor6LmrYzmm7Llr7nosaHvvIzmlL7liLB0ZW1wRGF0YeWSjHRhYmxlRGF0YemHjOmdog0KICAgICAgICBnZXRTb25nKGlkKSB7DQogICAgICAgICAgICBzb25nT2ZTb25nSWQoaWQpDQogICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBEYXRhLnB1c2gocmVzKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy50YWJsZURhdGEucHVzaChyZXMpOw0KICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgfSwNCiAgICAgICAgLy/liKDpmaTkuIDmnaHmrYzmm7INCiAgICAgICAgZGVsZXRlUm93KCkgew0KICAgICAgICAgICAgZGVsZXRlQ29sbGVjdGlvbih0aGlzLiRyb3V0ZS5xdWVyeS5pZCwgdGhpcy5pZHguaWQpDQogICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgICAgICAgICAgICBpZiAocmVzKSB7DQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldERhdGEoKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5KCLliKDpmaTmiJDlip8iLCAic3VjY2VzcyIpOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoIuWIoOmZpOWksei0pSIsICJlcnJvciIpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gew0KICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgdGhpcy5kZWxWaXNpYmxlID0gZmFsc2U7DQogICAgICAgIH0sDQogICAgICAgIC8v5om56YeP5Yig6Zmk5bey57uP6YCJ5oup55qE6aG5DQogICAgICAgIGRlbEFsbCgpIHsNCiAgICAgICAgICAgIGZvciAobGV0IGl0ZW0gb2YgdGhpcy5tdWx0aXBsZVNlbGVjdGlvbikgew0KICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlRGVsZXRlKGl0ZW0pOw0KICAgICAgICAgICAgICAgIHRoaXMuZGVsZXRlUm93KCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLm11bHRpcGxlU2VsZWN0aW9uID0gW107DQogICAgICAgIH0sDQogICAgfSwNCn07DQo="},{"version":3,"sources":["CollectPage.vue"],"names":[],"mappings":";AAwEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CollectPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n    <div class=\"table\">\r\n        <div class=\"crumbs\" style=\"padding: 20px 0 5px 20px\">\r\n            <i class=\"iconfont icon-r-list\" style=\"font-size: 24px\">\r\n                收藏信息</i\r\n            >\r\n        </div>\r\n        <div class=\"container\">\r\n            <div class=\"handle-box\">\r\n                <el-input\r\n                    v-model=\"select_word\"\r\n                    placeholder=\"筛选关键词\"\r\n                    class=\"handle-input\"\r\n                ></el-input>\r\n                <br /><br />\r\n                <el-button type=\"danger\" style=\"font-size: 18px\" @click=\"delAll\"\r\n                    ><i\r\n                        class=\"iconfont icon-r-delete\"\r\n                        style=\"font-size: 24px\"\r\n                    ></i>\r\n                    批量删除</el-button\r\n                >\r\n            </div>\r\n        </div>\r\n        <el-table\r\n            ref=\"multipleTable\"\r\n            border\r\n            style=\"width: 100%\"\r\n            height=\"680px\"\r\n            :data=\"tableData\"\r\n            @selection-change=\"handleSelectionChange\"\r\n        >\r\n            <el-table-column type=\"selection\" width=\"40\"></el-table-column>\r\n            <el-table-column\r\n                prop=\"name\"\r\n                label=\"歌手-歌名\"\r\n                align=\"center\"\r\n            ></el-table-column>\r\n            <el-table-column label=\"操作\" width=\"150\" align=\"center\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button\r\n                        style=\"font-size: 18px\"\r\n                        type=\"danger\"\r\n                        @click=\"handleDelete(scope.row)\"\r\n                        ><i\r\n                            class=\"iconfont icon-r-delete\"\r\n                            style=\"font-size: 22px\"\r\n                        ></i>\r\n                        删除</el-button\r\n                    >\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n\r\n        <el-dialog\r\n            title=\"删除歌曲\"\r\n            :visible.sync=\"delVisible\"\r\n            width=\"300px\"\r\n            center\r\n        >\r\n            <div align=\"center\">删除不可恢复，是否确定删除？</div>\r\n            <span slot=\"footer\">\r\n                <el-button size=\"mini\" @click=\"delVisible = false\"\r\n                    >取消</el-button\r\n                >\r\n                <el-button size=\"mini\" @click=\"deleteRow\">确定</el-button>\r\n            </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mixin } from \"../mixins/index\";\r\nimport {\r\n    songOfSongId,\r\n    getCollectOfUserId,\r\n    deleteCollection,\r\n} from \"../api/index\";\r\n\r\nexport default {\r\n    mixins: [mixin],\r\n    props: [\"id\"],\r\n    data() {\r\n        return {\r\n            delVisible: false, //删除弹窗是否显示\r\n            tableData: [],\r\n            tempData: [],\r\n            select_word: \"\",\r\n            idx: -1, //当前选择项\r\n            multipleSelection: [], //哪些项已经打勾\r\n        };\r\n    },\r\n    watch: {\r\n        //搜索框里面的内容发生变化的时候，搜索结果table列表的内容跟着它的内容发生变化\r\n        select_word: function () {\r\n            if (this.select_word == \"\") {\r\n                this.tableData = this.tempData;\r\n            } else {\r\n                this.tableData = [];\r\n                for (let item of this.tempData) {\r\n                    if (item.name.includes(this.select_word)) {\r\n                        this.tableData.push(item);\r\n                    }\r\n                }\r\n            }\r\n        },\r\n    },\r\n    created() {\r\n        this.getData();\r\n    },\r\n    methods: {\r\n        //查询该用户所有收藏的歌曲\r\n        getData() {\r\n            this.tempData = [];\r\n            this.tableData = [];\r\n            getCollectOfUserId(this.$route.query.id).then((res) => {\r\n                for (let item of res) {\r\n                    this.getSong(item.songId);\r\n                }\r\n            });\r\n        },\r\n        //根据歌曲id查询歌曲对象，放到tempData和tableData里面\r\n        getSong(id) {\r\n            songOfSongId(id)\r\n                .then((res) => {\r\n                    this.tempData.push(res);\r\n                    this.tableData.push(res);\r\n                })\r\n                .catch((err) => {\r\n                    console.log(err);\r\n                });\r\n        },\r\n        //删除一条歌曲\r\n        deleteRow() {\r\n            deleteCollection(this.$route.query.id, this.idx.id)\r\n                .then((res) => {\r\n                    if (res) {\r\n                        this.getData();\r\n                        this.notify(\"删除成功\", \"success\");\r\n                    } else {\r\n                        this.notify(\"删除失败\", \"error\");\r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    console.log(err);\r\n                });\r\n            this.delVisible = false;\r\n        },\r\n        //批量删除已经选择的项\r\n        delAll() {\r\n            for (let item of this.multipleSelection) {\r\n                this.handleDelete(item);\r\n                this.deleteRow();\r\n            }\r\n            this.multipleSelection = [];\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.handle-box {\r\n    margin-bottom: 20px;\r\n}\r\n.handle-input {\r\n    width: 300px;\r\n    display: inline-block;\r\n}\r\n</style>"]}]}