{"remainingRequest":"/Users/jiawang/售卖项目/影院管理系统/MusicSystem/MusicSystemAdminVue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jiawang/售卖项目/影院管理系统/MusicSystem/MusicSystemAdminVue/src/pages/SongListPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jiawang/售卖项目/影院管理系统/MusicSystem/MusicSystemAdminVue/src/pages/SongListPage.vue","mtime":1696062508000},{"path":"/Users/jiawang/售卖项目/影院管理系统/MusicSystem/MusicSystemAdminVue/node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js","mtime":1696221622669},{"path":"/Users/jiawang/售卖项目/影院管理系统/MusicSystem/MusicSystemAdminVue/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1696221623165}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQge2dldEFsbFNvbmdMaXN0LHNldFNvbmdMaXN0LHVwZGF0ZVNvbmdMaXN0LGRlbFNvbmdMaXN0fSBmcm9tICcuLi9hcGkvaW5kZXgnOw0KaW1wb3J0IHsgbWl4aW4gfSBmcm9tICcuLi9taXhpbnMvaW5kZXgnOw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIG1peGluczogW21peGluXSwNCiAgICBkYXRhKCl7DQogICAgICAgIHJldHVybnsNCiAgICAgICAgICAgIGNlbnRlckRpYWxvZ1Zpc2libGU6IGZhbHNlLCAvL+a3u+WKoOW8ueeql+aYr+WQpuaYvuekug0KICAgICAgICAgICAgZWRpdFZpc2libGU6IGZhbHNlLCAgICAgICAgIC8v57yW6L6R5by556qX5piv5ZCm5pi+56S6DQogICAgICAgICAgICBkZWxWaXNpYmxlOiBmYWxzZSwgICAgICAgICAgLy/liKDpmaTlvLnnqpfmmK/lkKbmmL7npLoNCiAgICAgICAgICAgIHJlZ2lzdGVyRm9ybTp7ICAgICAgLy/mt7vliqDmoYYNCiAgICAgICAgICAgICAgICB0aXRsZTogJycsDQogICAgICAgICAgICAgICAgaW50cm9kdWN0aW9uOiAnJywNCiAgICAgICAgICAgICAgICBzdHlsZTogJycNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBmb3JtOnsgICAgICAvL+e8lui+keahhg0KICAgICAgICAgICAgICAgIGlkOiAnJywNCiAgICAgICAgICAgICAgICB0aXRsZTogJycsDQogICAgICAgICAgICAgICAgaW50cm9kdWN0aW9uOiAnJywNCiAgICAgICAgICAgICAgICBzdHlsZTogJycNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB0YWJsZURhdGE6IFtdLA0KICAgICAgICAgICAgdGVtcERhdGE6IFtdLA0KICAgICAgICAgICAgc2VsZWN0X3dvcmQ6ICcnLA0KICAgICAgICAgICAgcGFnZVNpemU6IDUsICAgIC8v5YiG6aG15q+P6aG15aSn5bCPDQogICAgICAgICAgICBjdXJyZW50UGFnZTogMSwgIC8v5b2T5YmN6aG1DQogICAgICAgICAgICBpZHg6IC0xLCAgICAgICAgICAvL+W9k+WJjemAieaLqemhuQ0KICAgICAgICAgICAgbXVsdGlwbGVTZWxlY3Rpb246IFtdICAgLy/lk6rkupvpobnlt7Lnu4/miZPli74NCiAgICAgICAgfQ0KICAgIH0sDQogICAgY29tcHV0ZWQ6ew0KICAgICAgICAvL+iuoeeul+W9k+WJjeaQnOe0oue7k+aenOihqOmHjOeahOaVsOaNrg0KICAgICAgICBkYXRhKCl7DQogICAgICAgICAgICByZXR1cm4gdGhpcy50YWJsZURhdGEuc2xpY2UoKHRoaXMuY3VycmVudFBhZ2UgLSAxKSAqIHRoaXMucGFnZVNpemUsdGhpcy5jdXJyZW50UGFnZSAqIHRoaXMucGFnZVNpemUpDQogICAgICAgIH0NCiAgICB9LA0KICAgIHdhdGNoOnsNCiAgICAgICAgLy/mkJzntKLmoYbph4zpnaLnmoTlhoXlrrnlj5HnlJ/lj5jljJbnmoTml7blgJnvvIzmkJzntKLnu5Pmnpx0YWJsZeWIl+ihqOeahOWGheWuuei3n+edgOWug+eahOWGheWuueWPkeeUn+WPmOWMlg0KICAgICAgICBzZWxlY3Rfd29yZDogZnVuY3Rpb24oKXsNCiAgICAgICAgICAgIGlmKHRoaXMuc2VsZWN0X3dvcmQgPT0gJycpew0KICAgICAgICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gdGhpcy50ZW1wRGF0YTsNCiAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gW107DQogICAgICAgICAgICAgICAgZm9yKGxldCBpdGVtIG9mIHRoaXMudGVtcERhdGEpew0KICAgICAgICAgICAgICAgICAgICBpZihpdGVtLnRpdGxlLmluY2x1ZGVzKHRoaXMuc2VsZWN0X3dvcmQpKXsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFibGVEYXRhLnB1c2goaXRlbSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9LA0KICAgIGNyZWF0ZWQoKXsNCiAgICAgICAgdGhpcy5nZXREYXRhKCk7DQogICAgfSwNCiAgICBtZXRob2RzOnsNCiAgICAgICAgLy/ojrflj5blvZPliY3pobUNCiAgICAgICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpew0KICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHZhbDsNCiAgICAgICAgfSwNCiAgICAgICAgLy/mn6Xor6LmiYDmnInmrYzljZUNCiAgICAgICAgZ2V0RGF0YSgpew0KICAgICAgICAgICAgdGhpcy50ZW1wRGF0YSA9IFtdOw0KICAgICAgICAgICAgdGhpcy50YWJsZURhdGEgPSBbXTsNCiAgICAgICAgICAgIGdldEFsbFNvbmdMaXN0KCkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMudGVtcERhdGEgPSByZXM7DQogICAgICAgICAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXM7DQogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IDE7DQogICAgICAgICAgICB9KQ0KICAgICAgICB9LA0KICAgICAgICAvL+a3u+WKoOatjOWNlQ0KICAgICAgICBhZGRTb25nTGlzdCgpew0KICAgICAgICAgICAgbGV0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsNCiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoJ3RpdGxlJyx0aGlzLnJlZ2lzdGVyRm9ybS50aXRsZSk7DQogICAgICAgICAgICBwYXJhbXMuYXBwZW5kKCdwaWMnLCcvaW1nL3NvbmdMaXN0UGljLzEyMy5qcGcnKTsNCiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoJ2ludHJvZHVjdGlvbicsdGhpcy5yZWdpc3RlckZvcm0uaW50cm9kdWN0aW9uKTsNCiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoJ3N0eWxlJyx0aGlzLnJlZ2lzdGVyRm9ybS5zdHlsZSk7DQoNCiAgICAgICAgICAgIHNldFNvbmdMaXN0KHBhcmFtcykNCiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgaWYocmVzLmNvZGUgPT0gMSl7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeSgi5re75Yqg5oiQ5YqfIiwic3VjY2VzcyIpOw0KICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeSgi5re75Yqg5aSx6LSlIiwiZXJyb3IiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgdGhpcy5jZW50ZXJEaWFsb2dWaXNpYmxlID0gZmFsc2U7DQogICAgICAgIH0sDQogICAgICAgIC8v5by55Ye657yW6L6R6aG16Z2iDQogICAgICAgIGhhbmRsZUVkaXQocm93KXsNCiAgICAgICAgICAgIHRoaXMuZWRpdFZpc2libGUgPSB0cnVlOw0KICAgICAgICAgICAgdGhpcy5mb3JtID0gew0KICAgICAgICAgICAgICAgIGlkOiByb3cuaWQsDQogICAgICAgICAgICAgICAgdGl0bGU6IHJvdy50aXRsZSwNCiAgICAgICAgICAgICAgICBpbnRyb2R1Y3Rpb246IHJvdy5pbnRyb2R1Y3Rpb24sDQogICAgICAgICAgICAgICAgc3R5bGU6IHJvdy5zdHlsZQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICAvL+S/neWtmOe8lui+kemhtemdouS/ruaUueeahOaVsOaNrg0KICAgICAgICBlZGl0U2F2ZSgpew0KICAgICAgICAgICAgbGV0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsNCiAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoJ2lkJyx0aGlzLmZvcm0uaWQpOw0KICAgICAgICAgICAgcGFyYW1zLmFwcGVuZCgndGl0bGUnLHRoaXMuZm9ybS50aXRsZSk7DQogICAgICAgICAgICBwYXJhbXMuYXBwZW5kKCdpbnRyb2R1Y3Rpb24nLHRoaXMuZm9ybS5pbnRyb2R1Y3Rpb24pOw0KICAgICAgICAgICAgcGFyYW1zLmFwcGVuZCgnc3R5bGUnLHRoaXMuZm9ybS5zdHlsZSk7DQoNCiAgICAgICAgICAgIHVwZGF0ZVNvbmdMaXN0KHBhcmFtcykNCiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgICAgaWYocmVzLmNvZGUgPT0gMSl7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpOw0KICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeSgi5L+u5pS55oiQ5YqfIiwic3VjY2VzcyIpOw0KICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeSgi5L+u5pS55aSx6LSlIiwiZXJyb3IiKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgdGhpcy5lZGl0VmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICB9LA0KICAgICAgICAvL+abtOaWsOWbvueJhw0KICAgICAgICB1cGxvYWRVcmwoaWQpew0KICAgICAgICAgICAgcmV0dXJuIGAke3RoaXMuJHN0b3JlLnN0YXRlLkhPU1R9L3NvbmdMaXN0L3VwZGF0ZVNvbmdMaXN0UGljP2lkPSR7aWR9YA0KICAgICAgICB9LA0KICAgICAgICAvL+WIoOmZpOS4gOS4quatjOWNlQ0KICAgICAgICBkZWxldGVSb3coKXsNCiAgICAgICAgICAgIGRlbFNvbmdMaXN0KHRoaXMuaWR4KQ0KICAgICAgICAgICAgLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgICBpZihyZXMpew0KICAgICAgICAgICAgICAgICAgICB0aGlzLmdldERhdGEoKTsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoIuWIoOmZpOaIkOWKnyIsInN1Y2Nlc3MiKTsNCiAgICAgICAgICAgICAgICB9ZWxzZXsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub3RpZnkoIuWIoOmZpOWksei0pSIsImVycm9yIik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gew0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7DQogICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIHRoaXMuZGVsVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICB9LA0KICAgICAgICAvL+i9rOWQkeatjOabsueuoeeQhumhtemdog0KICAgICAgICBzb25nRWRpdChpZCxuYW1lKXsNCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtwYXRoOmAvTGlzdFNvbmdgLHF1ZXJ5OntpZH19KTsNCiAgICAgICAgfSwNCiAgICAgICAgLy/ovazlkJHor6XmrYzljZXnmoTor4TorrrliJfooagNCiAgICAgICAgZ2V0Q29tbWVudChpZCl7DQogICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDogJy9jb21tZW50JyxxdWVyeTp7aWR9fSkNCiAgICAgICAgfQ0KICAgIH0NCn0NCg=="},{"version":3,"sources":["SongListPage.vue"],"names":[],"mappings":";AAmHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SongListPage.vue","sourceRoot":"src/pages","sourcesContent":["<template>\r\n    <div class=\"table\">\r\n        <div class=\"container\">\r\n            <div class=\"handle-box\">\r\n                <el-input v-model=\"select_word\" placeholder=\"筛选关键字\" class=\"handle-input\"></el-input>\r\n                <br><br>\r\n                <el-button type=\"danger\" style=\"font-size: 18px;\" @click=\"delAll\"><i class=\"iconfont icon-r-delete\" style=\"font-size: 22px\"></i> 批量删除</el-button>\r\n                <el-button type=\"success\" style=\"font-size: 18px;\" @click=\"centerDialogVisible = true\"><i class=\"iconfont icon-r-add\" style=\"font-size: 22px\"></i> 添加歌单</el-button>\r\n            </div>\r\n        </div>\r\n        <el-table ref=\"multipleTable\" border style=\"width:100%\" height=\"680px\" :data=\"data\" @selection-change=\"handleSelectionChange\">\r\n            <el-table-column type=\"selection\" width=\"40\"></el-table-column>\r\n            <el-table-column label=\"歌单图片\" width=\"130\" align=\"center\">\r\n                <template slot-scope=\"scope\">\r\n                    <div class=\"songList-img\">\r\n                        <img :src=\"getUrl(scope.row.pic)\" style=\"width:100%\"/>\r\n                    </div>\r\n                    <el-upload :action=\"uploadUrl(scope.row.id)\" :before-upload=\"beforeAvatorUpload\" \r\n                        :on-success=\"handleAvatorSuccess\">\r\n                        <el-button style=\"font-size: 18px;\" type=\"success\"><i class=\"iconfont icon-r-refresh\" style=\"font-size: 22px\"></i> 更换</el-button>\r\n                    </el-upload>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"title\" label=\"标题\" width=\"120\" align=\"center\"></el-table-column>     \r\n            <el-table-column label=\"简介\">\r\n                <template slot-scope=\"scope\">\r\n                    <p style=\"height:100px;overflow:scroll\">{{scope.row.introduction}}</p>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"style\" label=\"风格\" width=\"120\" align=\"center\"></el-table-column>  \r\n            <el-table-column label=\"操作\" width=\"520\" align=\"center\">\r\n                <template slot-scope=\"scope\">\r\n                    <el-button style=\"font-size: 18px;\" type=\"warning\" @click=\"songEdit(scope.row.id)\"><i class=\"iconfont icon-r-list\" style=\"font-size: 22px\"></i> 歌曲管理</el-button>\r\n                    <el-button style=\"font-size: 18px;\"  @click=\"getComment(data[scope.$index].id)\"><i class=\"iconfont icon-r-team\" style=\"font-size: 22px\"></i> 评论</el-button>\r\n                    <el-button style=\"font-size: 18px;\" type=\"success\" @click=\"handleEdit(scope.row)\"><i class=\"iconfont icon-r-edit\" style=\"font-size: 22px\"></i> 编辑</el-button>\r\n                    <el-button style=\"font-size: 18px;\" type=\"danger\" @click=\"handleDelete(scope.row.id)\"><i class=\"iconfont icon-r-delete\" style=\"font-size: 22px\"></i> 删除</el-button> \r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n        <div class=\"pagination\">\r\n            <el-pagination\r\n                background\r\n                layout = \"total,prev,pager,next\"\r\n                :current-page=\"currentPage\"\r\n                :page-size=\"pageSize\"\r\n                :total=\"tableData.length\"\r\n                @current-change=\"handleCurrentChange\"\r\n                >\r\n            </el-pagination>\r\n        </div>\r\n\r\n        <el-dialog title=\"添加歌单\" :visible.sync=\"centerDialogVisible\" width=\"400px\" center>\r\n            <el-form :model=\"registerForm\" ref=\"registerForm\" label-width=\"80px\">\r\n                <el-form-item prop=\"title\" label=\"标题\" size=\"mini\">\r\n                    <el-input v-model=\"registerForm.title\" placeholder=\"标题\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item prop=\"introduction\" label=\"简介\" size=\"mini\">\r\n                    <el-input v-model=\"registerForm.introduction\" placeholder=\"简介\" type=\"textarea\"></el-input>\r\n                </el-form-item>\r\n                \r\n                <el-form-item prop=\"style\" label=\"风格\" size=\"mini\">\r\n                    <el-select v-model=\"registerForm.style\" placeholder=\"风格\">\r\n                        <el-option key=\"华语\" label=\"华语\" value=\"华语\"></el-option>\r\n                        <el-option key=\"粤语\" label=\"粤语\" value=\"粤语\"></el-option>\r\n                        <el-option key=\"欧美\" label=\"欧美\" value=\"欧美\"></el-option>\r\n                        <el-option key=\"日韩\" label=\"日韩\" value=\"日韩\"></el-option>\r\n                        <el-option key=\"轻音乐\" label=\"轻音乐\" value=\"轻音乐\"></el-option>\r\n                        <el-option key=\"BGM\" label=\"BGM\" value=\"BGM\"></el-option>\r\n                        <el-option key=\"乐器\" label=\"乐器\" value=\"乐器\"></el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n            </el-form>\r\n            <span slot=\"footer\">\r\n                <el-button size=\"mini\" @click=\"centerDialogVisible = false\">取消</el-button>\r\n                <el-button size=\"mini\" @click=\"addSongList\">确定</el-button>                \r\n            </span>\r\n        </el-dialog>\r\n\r\n        <el-dialog title=\"修改歌单\" :visible.sync=\"editVisible\" width=\"400px\" center>\r\n            <el-form :model=\"form\" ref=\"form\" label-width=\"80px\">\r\n                <el-form-item prop=\"title\" label=\"标题\" size=\"mini\">\r\n                    <el-input v-model=\"form.title\" placeholder=\"标题\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item prop=\"introduction\" label=\"简介\" size=\"mini\">\r\n                    <el-input v-model=\"form.introduction\" placeholder=\"简介\" type=\"textarea\"></el-input>\r\n                </el-form-item>    \r\n                <el-form-item prop=\"style\" label=\"风格\" size=\"mini\">\r\n                    <el-select v-model=\"form.style\" placeholder=\"风格\">\r\n                        <el-option key=\"华语\" label=\"华语\" value=\"华语\"></el-option>\r\n                        <el-option key=\"粤语\" label=\"粤语\" value=\"粤语\"></el-option>\r\n                        <el-option key=\"欧美\" label=\"欧美\" value=\"欧美\"></el-option>\r\n                        <el-option key=\"日韩\" label=\"日韩\" value=\"日韩\"></el-option>\r\n                        <el-option key=\"轻音乐\" label=\"轻音乐\" value=\"轻音乐\"></el-option>\r\n                        <el-option key=\"BGM\" label=\"BGM\" value=\"BGM\"></el-option>\r\n                        <el-option key=\"乐器\" label=\"乐器\" value=\"乐器\"></el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n            </el-form>\r\n            <span slot=\"footer\">\r\n                <el-button size=\"mini\" @click=\"editVisible = false\">取消</el-button>\r\n                <el-button size=\"mini\" @click=\"editSave\">确定</el-button>                \r\n            </span>\r\n        </el-dialog>\r\n\r\n        <el-dialog title=\"删除歌单\" :visible.sync=\"delVisible\" width=\"300px\" center>\r\n            <div align=\"center\">删除不可恢复，是否确定删除？</div>\r\n            <span slot=\"footer\">\r\n                <el-button size=\"mini\" @click=\"delVisible = false\">取消</el-button>\r\n                <el-button size=\"mini\" @click=\"deleteRow\">确定</el-button>                \r\n            </span>\r\n        </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {getAllSongList,setSongList,updateSongList,delSongList} from '../api/index';\r\nimport { mixin } from '../mixins/index';\r\nexport default {\r\n    mixins: [mixin],\r\n    data(){\r\n        return{\r\n            centerDialogVisible: false, //添加弹窗是否显示\r\n            editVisible: false,         //编辑弹窗是否显示\r\n            delVisible: false,          //删除弹窗是否显示\r\n            registerForm:{      //添加框\r\n                title: '',\r\n                introduction: '',\r\n                style: ''\r\n            },\r\n            form:{      //编辑框\r\n                id: '',\r\n                title: '',\r\n                introduction: '',\r\n                style: ''\r\n            },\r\n            tableData: [],\r\n            tempData: [],\r\n            select_word: '',\r\n            pageSize: 5,    //分页每页大小\r\n            currentPage: 1,  //当前页\r\n            idx: -1,          //当前选择项\r\n            multipleSelection: []   //哪些项已经打勾\r\n        }\r\n    },\r\n    computed:{\r\n        //计算当前搜索结果表里的数据\r\n        data(){\r\n            return this.tableData.slice((this.currentPage - 1) * this.pageSize,this.currentPage * this.pageSize)\r\n        }\r\n    },\r\n    watch:{\r\n        //搜索框里面的内容发生变化的时候，搜索结果table列表的内容跟着它的内容发生变化\r\n        select_word: function(){\r\n            if(this.select_word == ''){\r\n                this.tableData = this.tempData;\r\n            }else{\r\n                this.tableData = [];\r\n                for(let item of this.tempData){\r\n                    if(item.title.includes(this.select_word)){\r\n                        this.tableData.push(item);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    created(){\r\n        this.getData();\r\n    },\r\n    methods:{\r\n        //获取当前页\r\n        handleCurrentChange(val){\r\n            this.currentPage = val;\r\n        },\r\n        //查询所有歌单\r\n        getData(){\r\n            this.tempData = [];\r\n            this.tableData = [];\r\n            getAllSongList().then(res => {\r\n                this.tempData = res;\r\n                this.tableData = res;\r\n                this.currentPage = 1;\r\n            })\r\n        },\r\n        //添加歌单\r\n        addSongList(){\r\n            let params = new URLSearchParams();\r\n            params.append('title',this.registerForm.title);\r\n            params.append('pic','/img/songListPic/123.jpg');\r\n            params.append('introduction',this.registerForm.introduction);\r\n            params.append('style',this.registerForm.style);\r\n\r\n            setSongList(params)\r\n            .then(res => {\r\n                if(res.code == 1){\r\n                    this.getData();\r\n                    this.notify(\"添加成功\",\"success\");\r\n                }else{\r\n                    this.notify(\"添加失败\",\"error\");\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            });\r\n            this.centerDialogVisible = false;\r\n        },\r\n        //弹出编辑页面\r\n        handleEdit(row){\r\n            this.editVisible = true;\r\n            this.form = {\r\n                id: row.id,\r\n                title: row.title,\r\n                introduction: row.introduction,\r\n                style: row.style\r\n            }\r\n        },\r\n        //保存编辑页面修改的数据\r\n        editSave(){\r\n            let params = new URLSearchParams();\r\n            params.append('id',this.form.id);\r\n            params.append('title',this.form.title);\r\n            params.append('introduction',this.form.introduction);\r\n            params.append('style',this.form.style);\r\n\r\n            updateSongList(params)\r\n            .then(res => {\r\n                if(res.code == 1){\r\n                    this.getData();\r\n                    this.notify(\"修改成功\",\"success\");\r\n                }else{\r\n                    this.notify(\"修改失败\",\"error\");\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            });\r\n            this.editVisible = false;\r\n        },\r\n        //更新图片\r\n        uploadUrl(id){\r\n            return `${this.$store.state.HOST}/songList/updateSongListPic?id=${id}`\r\n        },\r\n        //删除一个歌单\r\n        deleteRow(){\r\n            delSongList(this.idx)\r\n            .then(res => {\r\n                if(res){\r\n                    this.getData();\r\n                    this.notify(\"删除成功\",\"success\");\r\n                }else{\r\n                    this.notify(\"删除失败\",\"error\");\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(err);\r\n            });\r\n            this.delVisible = false;\r\n        },\r\n        //转向歌曲管理页面\r\n        songEdit(id,name){\r\n            this.$router.push({path:`/ListSong`,query:{id}});\r\n        },\r\n        //转向该歌单的评论列表\r\n        getComment(id){\r\n            this.$router.push({path: '/comment',query:{id}})\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n    .handle-box{\r\n        margin-bottom: 20px;\r\n    }\r\n    .songList-img{\r\n        width: 100%;\r\n        height: 100px;\r\n        border-radius: 5px;\r\n        margin-bottom: 5px;\r\n        overflow: hidden;\r\n    }\r\n    .handle-input{\r\n        width: 300px;\r\n        display: inline-block;\r\n    }\r\n    .pagination{\r\n        display: flex;\r\n        justify-content: center;\r\n    }\r\n</style>"]}]}